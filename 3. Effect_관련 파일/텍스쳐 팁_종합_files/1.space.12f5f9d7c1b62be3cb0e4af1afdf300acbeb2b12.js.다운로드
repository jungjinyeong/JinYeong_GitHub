(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{574:function(e,t,s){"use strict";var i=s(2),a=s.n(i),n=s(10),r=s(32),o=s(0);function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}var l={name:"series-select-video",props:{sid:{type:Number,required:!0},show:{type:Boolean,default:!1},selectedCount:{type:Number,default:0}},data:function(){return{kw:"",selected:[],isLoaded:!0,videos:{pages:0,pn:1,count:0,vlist:[]},pn:1,orderby:"pubdate"}},methods:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){a()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({load:function(){var e=this;(function(e){return Object(r.a)({url:"//api.bilibili.com/x/series/recArchivesByKeywords",method:"GET",withCredentials:!0,query:{mid:e.mid,keywords:e.keywords,series_id:e.sid,orderby:e.orderby,ps:0}}).then((function(e){if(0===e.data.code)return e.data.data;o.default.$toast(e.data.message)}))})({sid:this.sid,mid:_bili_space_mid,keywords:[this.kw],orderby:this.orderby}).then((function(t){e.$set(e.videos,"vlist",t.archives)})),this.isLoaded=!1},handleLoadMore:function(){this.pn<this.videos.pages&&this.isLoaded&&(this.pn++,this.load())},select:function(e){var t=this.selected,s=t.indexOf(e);s>-1?t.splice(s,1):this.selected.length>=100?this.$toast("批量只支持选中100个视频哦！"):this.selected.length>=1e3?this.$toast("目前最多只能添加1000个视频哦！"):t.push(e),this.selected=t},handleSort:function(e){e!==this.orderby&&(this.orderby=e,this.load(),document.querySelector(".pin-layer-video").scrollTop=0)},search:function(){window._search_keyword=this.kw,this.selected=[],this.load(),document.querySelector(".pin-layer-video").scrollTop=0},close:function(){this.$emit("close"),this.closeWindow()},confirm:function(){var e=this.selected;0!==e.length&&e&&(this.$emit("confirm",e),this.closeWindow())},closeWindow:function(){this.resetData()},resetData:function(){this.kw="",this.pn=1,this.orderby="senddate",this.isSorting=!1,this.selected=[],window._search_keyword=""}},Object(n.b)(["checkDisabledVideo","fetchXuanzeVideos"])),computed:{styles:function(){return this.count,[]},curSort:function(){return"views"===this.orderby?"最多播放":"最新发布"},counter:function(){return 1e3-this.selected.length-this.selectedCount},count:function(){return this.videos.count}},watch:{show:function(){this.videos={vlist:[],count:0,pn:1,pages:0},this.load()}}},d=s(4),p=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{id:"pin-wrapper"}},[s("div",{attrs:{id:"pin-layer"}},[s("div",{staticClass:"pin-layer-header"},[s("span",{staticClass:"pin-layer-close icon",on:{click:e.close}}),s("p",{staticClass:"pin-layer-header-text"},[e._v("选择视频")]),s("p",{staticClass:"pin-layer-header-counter"},[e._v("\n          你还可以添加 "),s("i",{staticClass:"count"},[e._v(e._s(e.counter))]),e._v(" 个视频\n        ")])]),s("div",{staticClass:"pin-layer-body"},[s("div",{staticClass:"pin-layer-search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.kw,expression:"kw"}],staticClass:"space_input",attrs:{type:"text",id:"pin-layer-search",placeholder:"搜索我上传的视频"},domProps:{value:e.kw},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||(e.kw=t.target.value)}}}),s("span",{staticClass:"icon",attrs:{id:"pin-layer-search-btn"},on:{click:e.search}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.videos.count>0&&e.isLoaded&&e.kw.length>0,expression:"videos.count > 0 && isLoaded && kw.length > 0"}],staticClass:"pin-layer-search-result"},[e._v("\n            共找到关于“\n            "),s("span",{staticClass:"pin-layer-search-keyword"},[e._v(e._s(e.kw))]),e._v(" ”的"+e._s(e.videos.count)+"个视频\n          ")])]),s("div",{staticClass:"pin-layer-order clearfix"},[s("p",{staticClass:"pin-layer-order-tip"},[e._v("未添加视频列表")]),s("be-dropdown",{staticClass:"pin-layer-order-dropdown",on:{select:e.handleSort}},[s("div",{attrs:{slot:"trigger"},slot:"trigger"},[s("span",[e._v(e._s(e.curSort))]),s("span",{staticClass:"d-arrow"})]),s("be-dropdown-menu",{attrs:{slot:"menu"},slot:"menu"},[s("be-dropdown-item",{attrs:{name:"pubdate"}},[e._v("最新发布")]),s("be-dropdown-item",{attrs:{name:"views"}},[e._v("最多播放")])],1)],1)],1),s("be-scrollbar",{staticClass:"pin-layer-video",class:e.styles,attrs:{source:e.videos.vlist},on:{"ps-y-reach-end":e.handleLoadMore}},[s("div",{staticClass:"pin-layer-vlist"},e._l(e.videos.vlist,(function(t){return s("div",{key:t.aid,staticClass:"small-item",class:{added:t.channel>0,selected:e.selected.indexOf(t.aid)>-1},on:{click:function(s){return e.select(t.aid,t.channel)}}},[s("div",{staticClass:"cover"},[s("img",{attrs:{src:e._f("coversize")(t.pic,"80x50"),alt:t.title}}),s("span",{staticClass:"added-icon"},[e._v("已添加")])]),s("div",{staticClass:"detail"},[s("div",{directives:[{name:"hlkeyword",rawName:"v-hlkeyword",value:t.title,expression:"video.title"}],staticClass:"title",attrs:{title:t.title}}),s("div",{staticClass:"meta"},[s("span",{staticClass:"play"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("viewCountShorten")(t.stat.view))+"\n                  ")]),s("span",{staticClass:"time"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("format_pubdate")(t.pubdate))+"\n                  ")])])]),s("span",{staticClass:"checkbox"},[s("span",{staticClass:"icon"})])])})),0)])],1),s("be-button-group",{staticClass:"pin-layer-footer"},[s("be-button",{attrs:{type:"primary",disabled:0===e.selected.length},nativeOn:{click:function(t){return e.confirm.apply(null,arguments)}}},[e._v("确定")]),s("be-button",{nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[e._v("取消")])],1)],1)])])}),[],!1,null,null,null);t.a=p.exports},580:function(e,t,s){"use strict";var i=s(2),a=s.n(i),n=s(562),r=s(10),o=s(26);function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}var l={name:"video-card",components:{VideoRip:n.a},props:{state:{type:Number,default:1},title:{type:String,default:"default"},duration:{type:Number},aid:{type:Number,default:1},bvid:{type:String,default:""},playNum:{type:Number,default:0},date:{type:Number,default:0},pic:{type:String,default:""},isCollection:{type:Boolean,default:!1}},data:function(){return{}},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){a()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(r.c)(["watchlaterAids"])),methods:{reportVideoCard:function(e){Object(o.a)({c:"video",d:"tile_type_content",e:"click",type:"click"},{msg:JSON.stringify({ID:e,type:this.isCollection?1:2})})}}},d=(s(751),s(4)),p=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"video-card card-item"},[s("VideoRip",{attrs:{link:"//www.bilibili.com/video/"+e.bvid,state:e.state},nativeOn:{click:function(t){return e.reportVideoCard(e.aid)}}},[s("template",{slot:"content"},[s("img",{attrs:{src:e._f("coversize")(e.pic,"570x357"),alt:""}}),s("span",{staticClass:"length"},[e._v(e._s(e._f("videoDuration")(e.duration)))]),s("span",{directives:[{name:"watchlater",rawName:"v-watchlater.tip.video",value:{aid:e.aid},expression:"{'aid': aid}",modifiers:{tip:!0,video:!0}}],staticClass:"i-watchlater",class:{"has-select":e.watchlaterAids.indexOf(e.aid)>-1}})])],2),s("a",{directives:[{name:"rep",rawName:"v-rep",value:"space_channelDetail_video_click",expression:"'space_channelDetail_video_click'"}],staticClass:"title",attrs:{title:e.title,href:e._f("videoValidLink")(e.aid,e.bvid,e.state)},on:{click:function(t){return e.reportVideoCard(e.aid)}}},[e._v("\n    "+e._s(e.title)+"\n  ")]),s("div",{staticClass:"meta"},[s("span",{staticClass:"play"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("viewCountShorten")(e.playNum))+"\n    ")]),s("span",{staticClass:"time"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("format_pubdate")(e.date))+"\n    ")])])],1)}),[],!1,null,"58f00f71",null);t.a=p.exports},581:function(e,t,s){"use strict";var i=s(2),a=s.n(i),n=s(10);function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}var o={name:"select-video",props:{selectedVideos:{type:Array,default:function(){return[]}},selectedCount:{type:Number,default:0},cid:{type:Number,required:!0},show:{type:Boolean,default:!1}},data:function(){return{kw:"",selected:[],isLoaded:!0,videos:{pages:0,pn:1,count:0,vlist:[]},params:{pn:1,ps:50,check_type:"channel",check_id:0,order:"senddate",keyword:"",mid:_bili_space_mid}}},methods:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){a()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({load:function(){var e=this;this.isLoaded=!1,this.fetchXuanzeVideos(this.params).then((function(t){t.vlist=t.vlist||[],e.videos.pn=t.pn,1===e.params.pn?e.videos.vlist=t.vlist:e.videos.vlist=e.videos.vlist.concat(t.vlist),e.videos.pages=t.pages,e.videos.count=t.count,e.isLoaded=!0}))},handleLoadMore:function(){this.params.pn<this.videos.pages&&this.isLoaded&&(this.params.pn++,this.load())},select:function(e){if(!(this.selectedVideos.indexOf(e)>-1)){var t=this.selected,s=t.indexOf(e);s>-1?t.splice(s,1):this.selected.length>=100?this.$toast("批量只支持选中100个视频哦！"):this.selected.length+this.selectedCount>=300?this.$toast("目前最多只能添加300个视频哦！"):t.push(e),this.selected=t}},handleSort:function(e){e!==this.params.order&&(this.params.order=e,this.params.pn=1,this.load(),document.querySelector(".pin-layer-video").scrollTop=0)},search:function(){this.params.keyword=this.kw,this.params.pn=1,window._search_keyword=this.kw,this.selected=[],this.load(),document.querySelector(".pin-layer-video").scrollTop=0},close:function(){this.$emit("close"),this.closeWindow()},confirm:function(){var e=this.selected;0!==e.length&&e&&(this.$emit("confirm",e),this.closeWindow())},closeWindow:function(){this.resetData()},resetData:function(){this.kw="",this.params.pn=1,this.params.keyword="",this.params.order="senddate",this.isSorting=!1,this.selected=[],window._search_keyword=""}},Object(n.b)(["checkDisabledVideo","fetchXuanzeVideos"])),computed:{styles:function(){var e=[];return 0===this.count&&e.push("empty"),e},curSort:function(){return"click"===this.params.order?"最多播放":"最新发布"},counter:function(){return 300-this.selected.length-this.selectedCount},count:function(){return this.videos.count}},watch:{show:function(e){e?(this.params.check_id=this.cid,this.load()):(this.videos.vlist=[],this.videos.count=0,this.videos.pn=1,this.videos.pages=0)}}},c=s(4),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{id:"pin-wrapper"}},[s("div",{attrs:{id:"pin-layer"}},[s("div",{staticClass:"pin-layer-header"},[s("span",{staticClass:"pin-layer-close icon",on:{click:e.close}}),s("p",{staticClass:"pin-layer-header-text"},[e._v("选择视频")]),s("p",{staticClass:"pin-layer-header-counter"},[e._v("\n          你还可以添加 "),s("i",{staticClass:"count"},[e._v(e._s(e.counter))]),e._v(" 个视频\n        ")])]),s("div",{staticClass:"pin-layer-body"},[s("div",{staticClass:"pin-layer-search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.kw,expression:"kw"}],staticClass:"space_input",attrs:{type:"text",id:"pin-layer-search",placeholder:"搜索我上传的视频"},domProps:{value:e.kw},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||(e.kw=t.target.value)}}}),s("span",{staticClass:"icon",attrs:{id:"pin-layer-search-btn"},on:{click:e.search}}),s("p",{directives:[{name:"show",rawName:"v-show",value:e.videos.count>0&&e.isLoaded&&e.params.keyword.length>0,expression:"videos.count > 0 && isLoaded && params.keyword.length > 0"}],staticClass:"pin-layer-search-result"},[e._v("\n            共找到关于“\n            "),s("span",{staticClass:"pin-layer-search-keyword"},[e._v(e._s(e.params.keyword))]),e._v(" ”的"+e._s(e.videos.count)+"个视频\n          ")])]),s("div",{staticClass:"pin-layer-order clearfix"},[s("p",{staticClass:"pin-layer-order-tip"},[e._v("未添加视频列表")]),s("be-dropdown",{staticClass:"pin-layer-order-dropdown",on:{select:e.handleSort}},[s("div",{attrs:{slot:"trigger"},slot:"trigger"},[s("span",[e._v(e._s(e.curSort))]),s("span",{staticClass:"d-arrow"})]),s("be-dropdown-menu",{attrs:{slot:"menu"},slot:"menu"},[s("be-dropdown-item",{attrs:{name:"senddate"}},[e._v("最新发布")]),s("be-dropdown-item",{attrs:{name:"click"}},[e._v("最多播放")])],1)],1)],1),s("be-scrollbar",{staticClass:"pin-layer-video",class:e.styles,attrs:{source:e.videos.vlist},on:{"ps-y-reach-end":e.handleLoadMore}},[s("div",{staticClass:"pin-layer-vlist"},[e._l(e.videos.vlist,(function(t){return s("div",{staticClass:"small-item",class:{added:t.channel>0,selected:e.selected.indexOf(t.aid)>-1},on:{click:function(s){return e.select(t.aid,t.channel)}}},[s("div",{staticClass:"cover"},[s("img",{attrs:{src:e._f("coversize")(t.pic,"80x50"),alt:t.title}}),s("span",{staticClass:"added-icon"},[e._v("已添加")])]),s("div",{staticClass:"detail"},[s("div",{directives:[{name:"hlkeyword",rawName:"v-hlkeyword",value:t.title,expression:"video.title"}],staticClass:"title",attrs:{title:t.title}}),s("div",{staticClass:"meta"},[s("span",{staticClass:"play"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("viewCountShorten")(t.play))+"\n                  ")]),s("span",{staticClass:"time"},[s("em",{staticClass:"icon"}),e._v(e._s(e._f("format_pubdate")(t.created))+"\n                  ")])])]),s("span",{staticClass:"checkbox"},[s("span",{staticClass:"icon"})])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoaded&&e.videos.count>0,expression:"!isLoaded && videos.count > 0"}],staticClass:"m-loading"},[s("i",{staticClass:"icon"}),s("span",[e._v("加载中...")])])],2),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.videos.count&&e.isLoaded,expression:"videos.count === 0 && isLoaded"}],staticClass:"pin-layer-video-empty"},[0===e.params.keyword.length?[e._v("\n              还没有上传过视频哦，\n              "),s("a",{attrs:{href:"//member.bilibili.com/v/video/submit.html",target:"_blank"}},[e._v("立即上传 >")])]:[e._v("\n              没有找到关于“\n              "),s("span",{staticClass:"pin-layer-search-keyword"},[e._v(e._s(e.params.keyword))]),e._v("”的视频哦\n            ")]],2)])],1),s("be-button-group",{staticClass:"pin-layer-footer"},[s("be-button",{attrs:{type:"primary",disabled:0===e.selected.length},nativeOn:{click:function(t){return e.confirm.apply(null,arguments)}}},[e._v("确定")]),s("be-button",{nativeOn:{click:function(t){return e.close.apply(null,arguments)}}},[e._v("取消")])],1)],1)])])}),[],!1,null,null,null);t.a=l.exports},582:function(e,t,s){"use strict";var i=s(2),a=s.n(i),n=s(10),r=s(574),o=s(635);function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}var l={name:"add-video",components:{SeriesSelectVideo:r.a},props:{sid:{type:Number,default:-1},selectedCount:{type:Number,default:0},isCollectionItem:{type:Boolean,default:!1}},data:function(){return{isSelecting:!1,isCollection:"collectiondetail"===this.$route.name||this.isCollectionItem}},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){a()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(n.c)(["_bili_space_mid","channels","_bili_space_info","_bili_space_state","isThereVideos","isChannelsLoad"])),methods:{handleAddVideo:function(){this.isSelecting=!0},closeAddVideos:function(){this.isSelecting=!1},confirmAddVideos:function(e){var t=this;this.isSelecting=!1,Object(o.a)({mid:this._bili_space_mid,sid:this.sid,aids:e}).then((function(e){0!==e.data.code?t.$toast(e.data.message):t.$emit("reLoad")}))}}},d=(s(752),s(4)),p=Object(d.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-video-component"},[e.isCollection?s("a",{staticClass:"channel-item channel-add-video",attrs:{href:"https://member.bilibili.com/platform/upload-manager/ep"}},[e._m(0)]):s("div",{staticClass:"channel-item channel-add-video",on:{click:e.handleAddVideo}},[e._m(1)]),s("series-select-video",{attrs:{show:e.isSelecting,selectedCount:e.selectedCount,sid:e.sid},on:{confirm:e.confirmAddVideos,close:e.closeAddVideos}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"add-covers-meta"},[t("div",{staticClass:"icon"}),t("div",{staticClass:"text"},[this._v("去创作中心添加视频")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"add-covers-meta"},[t("div",{staticClass:"icon"}),t("div",{staticClass:"text"},[this._v("添加视频")])])}],!1,null,"548e602e",null);t.a=p.exports},634:function(e,t,s){},635:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var i=s(32),a=s(146),n=s.n(a),r=s(150),o=s.n(r),c=function(e){return Object(i.a)({url:"//api.bilibili.com/x/series/series/addArchives",method:"POST",withCredentials:!0,data:n.a.stringify({mid:e.mid,series_id:e.sid,aids:(e.aids||[]).join(",")}),query:{csrf:o.a.get("bili_jct")}})}},636:function(e,t,s){},751:function(e,t,s){"use strict";s(634)},752:function(e,t,s){"use strict";s(636)}}]);
//# sourceMappingURL=1.space.12f5f9d7c1b62be3cb0e4af1afdf300acbeb2b12.js.map