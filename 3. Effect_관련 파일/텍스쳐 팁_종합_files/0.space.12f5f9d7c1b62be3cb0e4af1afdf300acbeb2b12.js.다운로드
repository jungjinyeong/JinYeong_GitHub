(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{562:function(e,t,i){"use strict";var s=i(75),a={name:"videoRip",data:function(){return{activeVideoStates:s.b,timer1:null,timer2:null,timer3:null,isHover:!1,disabledFrames:0}},props:{link:{type:String,default:"javascript:;",required:!0},state:{type:Number,default:0,required:!0},favState:{type:Number,default:0,required:!1},size:{type:String,default:"normal",validator:function(e){return["big","normal"].indexOf(e)>-1},required:!1},favType:{type:Number,default:2,required:!1},favDelete:{type:Number,default:0,required:!1}},methods:{hoverVideo:function(){var e=this,t=this.$refs.candle;t&&((this.favState?1===this.favState:-1===this.activeVideoStates.indexOf(this.state))&&(this.timer1=setTimeout((function(){e.isHover=!0,e.timer2=setInterval((function(){var i=e.disabledFrames;0===i&&(t.style.visibility="visible"),t.style.backgroundPositionX="".concat(-50*i,"px"),e.disabledFrames++,4===i&&clearInterval(e.timer2)}),80),e.timer3=setInterval((function(){var i=e.disabledFrames;9===i&&(e.disabledFrames=5),t.style.backgroundPositionX="".concat(-50*i,"px"),e.disabledFrames++}),100)}),200)))},leaveVideo:function(){clearTimeout(this.timer1),clearInterval(this.timer2),clearInterval(this.timer3);var e=this.$refs.candle;e.style.backgroundPositionX="0px",e.style.visibility="hidden",this.disabledFrames=0,this.isHover=!1},blankVideo:function(){return this.favState?1===this.favState:-1===this.activeVideoStates.indexOf(this.state)}}},n=(i(575),i(4)),o=Object(n.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a",{staticClass:"cover",class:["cover-"+e.size,{disabled:this.favState?1===this.favState:-1===this.activeVideoStates.indexOf(this.state)}],attrs:{href:e.activeVideoStates.indexOf(e.state)>-1?e.link:"javascript:;",target:e.blankVideo()?"":"_blank"}},[e._t("content"),i("div",{staticClass:"disabled-cover",class:{animate:e.isHover}},[i("div",{ref:"candle",staticClass:"candle"}),i("p",[e._v(e._s(2===e.favType?"视频":"音频")+"已失效")]),1===e.favDelete?i("div",{staticClass:"delete-from"},[e._v("已被UP主删除")]):e._e()])],2)}),[],!1,null,"3421314f",null);t.a=o.exports},567:function(e,t,i){},573:function(e,t,i){"use strict";var s=i(26),a={props:{show:{default:!1}},methods:{close:function(){this.$emit("close")}}},n=(i(657),i(4)),o=Object(n.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return this.show?t("div",{staticClass:"bili-dialog-m",on:{click:this.close}},[t("div",{staticClass:"bili-dialog-bomb",on:{click:function(e){e.stopPropagation()}}},[this._t("default")],2)]):this._e()}),[],!1,null,null,null).exports,d=i(2),c=i.n(d),r=i(10),l=i(32),u=i(146),p=i.n(u),h=i(150),m=i.n(h),v=function(e){return Object(l.a)({url:"//api.bilibili.com/x/series/propose",method:"POST",withCredentials:!0,data:p.a.stringify({mid:e.mid}),query:{csrf:m.a.get("bili_jct")}}).then((function(e){var t,i=null==e||null===(t=e.data)||void 0===t?void 0:t.data;return((null==i?void 0:i.series_list)||[]).map((function(e){var t,i,s;return{name:(null==e||null===(t=e.meta)||void 0===t?void 0:t.keywords[0])||"",id:(null==e||null===(i=e.meta)||void 0===i?void 0:i.mid)||"",count:(null==e?void 0:e.recent_aids.length)||0,sid:(null==e||null===(s=e.meta)||void 0===s?void 0:s.series_id)||0}}))}))},f=function(e){return Object(l.a)({url:"//api.bilibili.com/x/series/recArchivesByKeywords",method:"GET",withCredentials:!0,query:{mid:e.mid,keywords:e.keywords,ps:0}}).then((function(e){var t,i;return(null==e||null===(t=e.data)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.archives)||[]}))};function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _={name:"createSeriesList",props:{isEdit:{type:Boolean,default:!1,require:!0},seriesName:{type:String,default:""},sid:{type:Number,default:-1},desc:{type:String,default:""},keys:{type:String,default:""}},data:function(){return{name:this.seriesName,description:this.desc,title:"新建视频列表",step:1,keyword:this.keys,addAids:[],delAids:[],recList:[],recVideo:[]}},created:function(){var e=this;!0===this.isEdit&&(this.title="编辑视频列表"),v({mid:this._bili_space_mid}).then((function(t){t=(t||[]).slice(0,4),e.recList=t})).catch((function(){e.recList=[]}))},computed:b(b({},Object(r.c)(["_bili_space_mid"])),{},{isKeyWordChange:function(){return!(this.keyword===this.keys||!this.keyword)}}),methods:{changeStep:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;2!==t||0!==this.name.trim().length?(this.step=t,1===t?!0===this.isEdit?this.title="编辑视频列表":this.title="新建视频列表":2===t&&(this.addAids=[],this.delAids=[],this.title="选择视频",f({mid:this._bili_space_mid,keywords:this.keyword}).then((function(t){var i;i=t.map((function(t){return t.isChecked=!!e.keyword,e.keyword&&e.addAids.push(t.aid),t})),e.recVideo=i})).catch((function(t){console.log(t),e.$toast("获取视频列表失败")})))):this.$toast("请填写系列标题")},check:function(e){if(e.isChecked=!e.isChecked,!0===e.isChecked&&-1===this.addAids.indexOf(e.aid)){this.addAids.push(e.aid);var t=this.delAids.indexOf(e.aid);t>=0&&this.delAids.splice(t,1)}if(!1===e.isChecked&&-1===this.delAids.indexOf(e.aid)){this.delAids.push(e.aid);var i=this.addAids.indexOf(e.aid);i>=0&&this.addAids.splice(i,1)}},confirm:function(){var e,t,i=this;this.isEdit?this.isEdit&&function(e){return Object(l.a)({url:"//api.bilibili.com/x/series/series/update",method:"POST",withCredentials:!0,data:p.a.stringify({mid:e.mid,series_id:e.sid,name:e.name,keywords:e.keywords,description:e.description,add_aids:(e.addAids||[]).join(","),del_aids:(e.delAids||[]).join(","),aids:""}),query:{csrf:m.a.get("bili_jct")}})}({mid:this._bili_space_mid,name:this.name,sid:this.sid,keywords:this.keyword,description:this.description,addAids:this.addAids,delAids:this.delAids}).then((function(e){if(0!==e.data.code)return i.$toast(e.data.message);i.$emit("close")})).catch((function(e){console.log(e)})):(e={mid:this._bili_space_mid,name:this.name,keywords:this.keyword,description:this.description,aids:this.addAids},t=new FormData,t.append("mid",e.mid),t.append("name",e.name),t.append("keywords",e.keywords),t.append("description",e.description),t.append("aids",e.aids||[]),Object(l.a)({url:"//api.bilibili.com/x/series/series/createAndAddArchives",method:"POST",withCredentials:!0,data:t,query:{csrf:m.a.get("bili_jct")}})).then((function(e){if(0!==e.data.code)return i.$toast(e.data.message);i.$emit("close"),location.reload()})).catch((function(e){console.log(e)})),Object(s.a)({c:"video.add_channel_popup_success",d:"click",type:"click"},{msg:JSON.stringify({keyword:this.keyword?1:0})})},chooseKeyword:function(e){this.keyword=e},changeRecList:function(){var e=this;v({mid:this._bili_space_mid}).then((function(t){e.recList=t})).catch((function(){e.recList=[]}))}}},k=(i(659),{components:{BiliDialog:o,createSeriesList:Object(n.a)(_,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-wrapper"},[s("div",{staticClass:"dialog-title",domProps:{textContent:e._s(e.title)}}),1===e.step?[s("div",{staticClass:"create-input"},[s("p",{staticClass:"series-title"},[s("span",{staticClass:"command"},[e._v("视频列表标题")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{placeholder:"请填写标题",type:"text",maxlength:"10"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("span",{staticClass:"command-num"},[e._v(e._s(e.name.length)+"/10")])]),s("div",{staticClass:"series-desc"},[s("span",{staticClass:"command command-kw"},[e._v("视频列表简介")]),s("div",{staticClass:"series-desc-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{placeholder:"请填写视频列表简介(选填)",maxlength:"256",type:"text"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),s("span",{staticClass:"command-num"},[e._v(e._s(e.description.length)+"/256")])])]),s("div",{staticClass:"series-kw"},[s("span",{staticClass:"command"},[e._v("关键词")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{placeholder:"请填写关键词(选填)",type:"text",maxlength:"20"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),s("div",{staticClass:"rec-kw"},[e.recList.length>0?[s("p",[e._v("\n            推荐关键词"),s("i",{staticClass:"bilifont bili-icon_caozuo_huanyihuan",on:{click:e.changeRecList}})]),s("div",{staticClass:"keyword-content"},e._l(e.recList,(function(t){return s("span",{key:t.name,staticClass:"keyword",on:{click:function(i){return e.chooseKeyword(t.name)}}},[s("span",{staticClass:"keyword-txt",domProps:{textContent:e._s(t.name)}}),s("span",{staticClass:"keyword-num",domProps:{textContent:e._s(t.count+"个视频")}})])})),0)]:e._e(),s("p",{staticClass:"keyword-tips"},[e._v("标题含关键词的新投稿视频将自动同步至视频列表")])],2)])]),s("div",{staticClass:"create-action"},[!e.isKeyWordChange&&e.isEdit?s("div",{staticClass:"next-btn",on:{click:e.confirm}},[e._v("确定")]):s("div",{staticClass:"next-btn",on:{click:function(t){return e.changeStep(2)}}},[e._v("下一步")]),s("div",{staticClass:"cancel-btn",on:{click:function(t){return e.$emit("close")}}},[e._v("取消")])])]:e._e(),2===e.step?[s("p",{staticClass:"choose-title"},[s("span",{staticClass:"choose-kw",domProps:{textContent:e._s("关联关键词："+e.keyword)}}),s("span",{staticClass:"choose-kw-num",domProps:{textContent:e._s(e.recVideo.length+"个视频")}})]),s("div",{staticClass:"choose-video"},[e.recVideo&&e.recVideo.length<=0?s("div",{staticClass:"choose-no-video"},[s("img",{attrs:{src:i(658)}}),s("span",{staticClass:"no-video-tips"},[e._v("你没有相关投稿哦")])]):e._l(e.recVideo,(function(t){return s("div",{key:t.aid,staticClass:"video-card"},[s("img",{staticClass:"video-pic",attrs:{src:e._f("coversize")(t.pic,"141x80")}}),s("div",{staticClass:"video-info"},[s("div",{staticClass:"video-title",domProps:{textContent:e._s(t.title)}}),s("div",{staticClass:"video-num"},[s("div",{staticClass:"video-view",domProps:{textContent:e._s(t.stat.view+"播放")}}),s("div",{staticClass:"video-pub"},[e._v(e._s(e._f("format_yy-mm-dd")(t.pubdate))+"投稿")])])]),s("i",{staticClass:"video-check iconfont",class:!0===t.isChecked?"icon-checkbox_selected":"icon-checkbox",on:{click:function(i){return e.check(t)}}})])}))],2),s("div",{staticClass:"choose-action"},[s("div",{staticClass:"confirm-btn",on:{click:e.confirm}},[e._v("确定")]),s("div",{staticClass:"back-btn",on:{click:function(t){return e.changeStep(1)}}},[e._v("上一步")])])]:e._e()],2)}),[],!1,null,"32e1364a",null).exports},props:{isShowAddSeries:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1,require:!0},seriesName:{type:String,default:""},desc:{type:String,default:""},sid:{type:Number,default:-1},keys:{type:String,default:""}},data:function(){return{}},watch:{isShowAddSeries:function(e){!0===e&&Object(s.a)({c:"video.add_channel_popup",d:"show",type:"appear"})}}}),w=(i(660),Object(n.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BiliDialog",{attrs:{show:e.isShowAddSeries},on:{close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"dialog-wrapper"},[i("i",{staticClass:"dialog-close",on:{click:function(t){return e.$emit("close")}}}),i("createSeriesList",{attrs:{isEdit:e.isEdit,sid:e.sid,seriesName:e.seriesName,desc:e.desc,keys:e.keys},on:{close:function(t){return e.$emit("close")}}})],1)])}),[],!1,null,"f267d444",null));t.a=w.exports},575:function(e,t,i){"use strict";i(567)},587:function(e,t,i){},588:function(e,t,i){},589:function(e,t,i){},657:function(e,t,i){"use strict";i(587)},658:function(e,t,i){e.exports=i.p+"assets/nodata02.png"},659:function(e,t,i){"use strict";i(588)},660:function(e,t,i){"use strict";i(589)}}]);
//# sourceMappingURL=0.space.12f5f9d7c1b62be3cb0e4af1afdf300acbeb2b12.js.map