(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{641:function(e,i,t){},757:function(e,i,t){"use strict";t(641)},780:function(e,i,t){"use strict";t.r(i);var a=t(2),s=t.n(a),n=t(75),c=t(10),l=t(562),r=t(147),o=t(581),d=t(32),p=t(573),_=t(574),u=t(580),v=t(582),f=t(26);function h(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,a)}return t}function b(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?h(Object(t),!0).forEach((function(i){s()(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}var m={name:"CollectionDetail",data:function(){return{activeVideoStates:n.b,tabs:[{name:"desc",alias:"默认排序"},{name:"asc",alias:"升序排序"}],curOrder:"desc",isDragging:!1,isEditingChannel:!1,sid:0,total:0,pageSizeObj:{pn:1,ps:30,total:0},isSelecting:!1,videoList:[],curSerInfo:{}}},components:{spSelectVideo:o.a,VideoRip:l.a,BeTags:r.a,createSeriesDialog:p.a,VideoCard:u.a,SeriesSelectVideo:_.a,AddVideo:v.a},mounted:function(){var e=this.$route.query.sid;this.sid=1*e,this.reload()},methods:b(b({},Object(c.b)(["watchVideo"])),{},{handleEditChannel:function(){Object(f.a)({spm_id:"333.999",c:"video",d:"collection_detail_edit",e:"click",type:"click"},{msg:JSON.stringify({collection_id:this.sid})}),window.open("https://member.bilibili.com/platform/upload-manager/ep")},reload:function(){var e,i,t,a=this;"owner"===this._bili_space_state&&"desc"===this.curOrder?this.pageSizeObj.ps=29:this.pageSizeObj.ps=30,(e={mid:this._bili_space_mid,sid:this.sid,pageSizeObj:this.pageSizeObj,sort:"desc"!==this.curOrder},Object(d.a)({url:"//api.bilibili.com/x/polymer/space/seasons_archives_list",method:"GET",withCredentials:!0,query:{mid:e.mid,season_id:e.sid,sort_reverse:null==e?void 0:e.sort,page_num:(null==e||null===(i=e.pageSizeObj)||void 0===i?void 0:i.pn)||1,page_size:(null==e||null===(t=e.pageSizeObj)||void 0===t?void 0:t.ps)||30}}).then((function(e){return e.data.data}))).then((function(e){a.pageSizeObj.total=e.page.total,a.pageSizeObj.ps=e.page.page_size,a.pageSizeObj.pn=e.page.page_num,a.videoList=e.archives,a.curSerInfo=e.meta}))},handleClickVideo:function(e){this.watchVideo(e)},handleClickVideoReport:function(e){Object(f.a)({spm_id:"333.999",c:"video",d:"collection_detail_content",e:"click",type:"click"},{msg:JSON.stringify({avid:e,collection_id:this.sid})})},turnPage:function(e){this.pageSizeObj.pn=e,this.reload()},playAll:function(){var e;window.open("https://www.bilibili.com/video/".concat(null===(e=this.videoList[0])||void 0===e?void 0:e.bvid,"?spm_id_from=333.999.section.playall")),Object(f.a)({spm_id:"333.999",c:"video",d:"collection_detail_play_all",e:"click",type:"click"},{msg:JSON.stringify({collection_id:this.sid})})}}),computed:b(b({},Object(c.c)(["submitVideos","channel","selectVideos","_bili_space_state","_bili_space_mid","_bili_space_mymid","_bili_space_watch_history","watchlaterAids"])),{},{keyWords:function(){var e,i;return(null===(e=this.curSerInfo)||void 0===e||null===(i=e.keywords)||void 0===i?void 0:i[0])||""},aidArray:function(){return this.videoList?this.videoList.map((function(e){return e.aid})):[]},ps:function(){return this.pageSizeObj.ps},pn:function(){return this.pageSizeObj.pn},totalPage:function(){return Math.ceil(this.pageSizeObj.total/this.pageSizeObj.ps)}}),watch:{curOrder:function(e){this.reload(e)}}},g=(t(757),t(4)),O=Object(g.a)(m,(function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"wrapper",attrs:{id:"page-collection-detail"}},[t("div",{staticClass:"col-full"},[t("div",{staticClass:"channel-detail section"},[t("div",{staticClass:"content"},[t("div",{staticClass:"row page-head filter"},[t("div",{staticClass:"breadcrumb"},[t("router-link",{staticClass:"item",attrs:{to:{name:"seriesList"}}},[e._v(e._s("owner"===e._bili_space_state?"我":"TA")+"的合集和视频列表")]),t("i",{staticClass:"arrow"}),t("span",{staticClass:"item cur"},[e._v(e._s(e._f("decodeHTML")(e.curSerInfo&&e.curSerInfo.name)))])],1),e.curSerInfo&&e.curSerInfo.total>0?t("div",{directives:[{name:"rep",rawName:"v-rep",value:"space_play_all_click",expression:"'space_play_all_click'"}],staticClass:"paly-all-btn",on:{click:e.playAll}},[t("i",{staticClass:"iconfont video-commonplayer_play"}),t("span",[e._v(e._s("播放全部"))])]):e._e(),t("div",{staticClass:"channel-info"},[t("div",{staticClass:"info-detail"},[t("div",{staticClass:"meta"},[t("span",{staticClass:"heji_text"},[e._v("合集")]),t("span",{staticClass:"c-count"},[e._v(e._s(e.curSerInfo.total)+"个视频")]),t("span",{staticClass:"mtime"},[e._v(e._s(e._f("format_pubdate")(e.curSerInfo.ptime))+"更新")])]),t("div",{staticClass:"desc",staticStyle:{"-webkit-box-orient":"vertical"},attrs:{title:e.curSerInfo.description}},[e._v("\n                "+e._s(e._f("decodeHTML")(e.curSerInfo.description))+"\n              ")])])]),t("div",{staticClass:"channel-action-row"},[t("div",{staticClass:"v-filter-line clearfix"},[t("be-tab",{attrs:{tabs:e.tabs},model:{value:e.curOrder,callback:function(i){e.curOrder=i},expression:"curOrder"}})],1),"owner"===e._bili_space_state&&2!==e.curSerInfo.category?t("div",{staticClass:"channel-option"},[t("span",{directives:[{name:"rep",rawName:"v-rep",value:"space_channelDetail_empty_edit_click",expression:"'space_channelDetail_empty_edit_click'"}],staticClass:"modify-channel option",on:{click:e.handleEditChannel}},[e._v("编辑")])]):e._e()])]),t("ul",{staticClass:"row video-list clearfix"},["owner"===e._bili_space_state&&"desc"===e.curOrder&&2!==e.curSerInfo.category?t("li",[t("AddVideo",{attrs:{sid:e.sid,selectedCount:e.pageSizeObj.total},on:{reLoad:e.reload}})],1):e._e(),e._l(e.videoList,(function(i,a){return t("li",{key:i.aid,staticClass:"small-item",class:{watched:e._bili_space_watch_history.indexOf(i.aid)>-1,new:Date.now()-1e3*i.ctime<864e5,"fakeDanmu-item":e.activeVideoStates.indexOf(i.state)>-1,disabled:-1===e.activeVideoStates.indexOf(i.state)},attrs:{"data-aid":i.bvid,"data-state":i.state}},[t("video-rip",{directives:[{name:"rep",rawName:"v-rep",value:"space_channelDetail_video_click",expression:"'space_channelDetail_video_click'"}],attrs:{state:i.state,link:"//www.bilibili.com/video/"+i.bvid},nativeOn:{click:function(t){return e.handleClickVideoReport(i.aid)}}},[t("template",{slot:"content"},[t("img",{attrs:{src:e._f("coversize")(i.pic,"640x400")}}),t("span",{staticClass:"length"},[e._v(e._s(e._f("videoDuration")(i.duration)))]),t("span",{directives:[{name:"watchlater",rawName:"v-watchlater.tip.video",value:{aid:i.aid},expression:"{ aid: video.aid }",modifiers:{tip:!0,video:!0}}],staticClass:"i-watchlater",class:{"has-select":e.watchlaterAids.indexOf(i.aid)>-1}}),"owner"===e._bili_space_state?t("span",{staticClass:"num-icon"},[e._v(e._s(e.ps*(e.pn-1)+a+1))]):e._e()])],2),t("a",{directives:[{name:"rep",rawName:"v-rep",value:"space_channelDetail_video_click",expression:"'space_channelDetail_video_click'"}],staticClass:"title",attrs:{href:e._f("videoValidLink")(i.aid,i.bvid,i.state),target:e.activeVideoStates.indexOf(i.state)>-1?"_blank":"",title:i.title},on:{click:function(t){e.handleClickVideo(i.aid,i.bvid),e.handleClickVideoReport(i.aid)}}},[e._v("\n              "+e._s(e._f("decodeHTML")(i.title))+"\n            ")]),t("div",{staticClass:"meta"},[t("span",{staticClass:"play"},[t("em",{staticClass:"icon"}),e._v(e._s(e._f("viewCountShorten")(i.stat.view))+" ")]),t("span",{staticClass:"time"},[t("em",{staticClass:"icon"}),e._v(e._s(e._f("format_pubdate")(i.pubdate))+" ")])])],1)}))],2)]),t("be-pagination",{attrs:{total:e.totalPage,current:this.pageSizeObj.pn},on:{"turn-page":e.turnPage}})],1)]),t("createSeriesDialog",{attrs:{isEdit:!0,seriesName:e.curSerInfo&&e.curSerInfo.name,sid:e.sid,desc:e.curSerInfo&&e.curSerInfo.description,keys:e.keyWords,isShowAddSeries:e.isEditingChannel},on:{close:function(i){e.isEditingChannel=!1,e.reload()}}})],1)}),[],!1,null,null,null);i.default=O.exports}}]);
//# sourceMappingURL=27.space.12f5f9d7c1b62be3cb0e4af1afdf300acbeb2b12.js.map